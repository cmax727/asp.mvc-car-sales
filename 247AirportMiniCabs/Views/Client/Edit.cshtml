@model Job

@{
    var vehicle = Model.VehicleToken.GetVehicle();
}

<style>
    .main-content{padding: 1px 0;}
    .finalize-booking {
        margin: 0 327px;
        text-align: center;
        margin-bottom: 20px;
        background-color: #F3F3F3;
        background-repeat: no-repeat;
        background-position: 10px center;
        background-image: url(/content/images/checkbox.png);
        padding-left: 46px;
        border: 1px solid #1B0E0E;
        border-radius: 3px;
    }

    .finalize-booking:hover { background-color: #D6D6D6; }

    .finalize-booking:active {
        background-color: #C4C1C1;
    }

    .finalize-booking h2 {
        border-bottom: 1px solid #080A0C;
        color: black;
    }


    .additional-info { padding: 10px; }

    .methods {
        text-align: center;
        border: 0;
        margin-left: 20px;
    }

    .methods div {
        padding: 6px 12px;
        font-size: 22px;
        margin-left: -5px;
        border: 1px solid #2E609B;
        width: 74px;
        text-align: center;
    }


    .methods div.selected {
        background: #777;
        color: white;
    }


    .cash-method {
        margin-top: -25px;
        margin: 5px;
        margin-left: 114px;
        position: absolute;
        padding: 10px 25px;
        width: 676px;
    }

    .cash-method div:not(:last-child) { margin-bottom: 10px; }

    .additional-info-container {
        position: absolute;
        margin-left: 365px;
    }

    .additional-info-container label {
        vertical-align: top;
        margin-top: 20px;
    }

    textarea {
        width: 260px;
        height: 90px;
        margin: 0;
        resize: none;
    }


    .signup-section {
        margin: 0;
        width: auto;
        position: relative;
        margin-top: -26px;
    }

    .signup-button { margin-top: 14px!important; }

    .edit-panel {
        margin: 20px;
        border-radius: 0;
    }

    .from-location {
        width: 400px;
        margin-right: 50px;
    }

    .from-location div, .to-location div, .additional div { padding: 10px 40px; }
    #required-info-table div{padding: 10px 20px;}
    .to-location {padding:0!important;}

    .select-container {
        position: absolute;
        margin-left: 424px;
        margin-top: 120px;
    }

    .select-container hr { background: none; }

    .hours-minutes { width: 43px; }

    .blue-button { padding: 5px 10px!important; }

    .select-container select {
        width: 55px;
        display: block;
        margin-top: 3px;
        z-index: 100;
    }

    .select-container img {
        margin-left: 6px;
        height: 30px;
    }

    .select-container div {
        float: left;
        width: 80px;
        margin-left: -5px;
        padding: 0;
    }

    .return-time-container {
        position: absolute;
        margin-top: 230px;
        margin-left: 400px;
    }

    #minutes, #hours-list {
        width: 244px!important;
        background-color: #FBFBFB;
        border-radius: 3px;
        border-top-left-radius: 0;
    }

    #hours-list { width: 324px!important; }

    #minutes div, #hours-list div {
        display: inline-block;
        border-left: 1px solid #2E609B;
    }

    td { vertical-align: top; }

    .add-new-stop, .remove-stop {
        position: absolute;
        padding: 3px 10px!important;
        background: #F7F7F7;
        font-size: 22px;
        margin-left: 324px;
        margin-top: -3px;
        border: 1px solid #2E609B;
        border-radius: 50%;
        cursor: pointer;
        color: #2E609B;
    }

    .add-new-stop:hover, .remove-stop:hover { background: #EEECEC; }

    .add-new-stop:active, .remove-stop:active { background: #868686; }

    .remove-stop {
        position: static;
        margin: 0 5px;
        font-size: 15px;
        padding: 1px 7px!important;
    }
    
    .are-you-passenger span {
        display: inline-block;
        padding: 5px 10px;
    }
    
    #yes-pessenger {
        background-color: #2BCE2B;
    }
    #yes-pessenger:hover {
        background-color: #24BE24;
    }
    #yes-pessenger:active {
        background-color: #189E18;
    }
    
    #no-passenger {
        background-color: #F77E7E;
        margin-left: -4px;
    }
    #no-passenger:hover {
        background-color: #F35E5E;
    }
    #no-passenger:active {
        background-color: #E05151;
    }
    .are-you-passenger .selected, .required, .newspaper, .bottle-of-water, .drink
    {
        background-repeat: no-repeat;
    }
    .are-you-passenger .selected
    {
        padding-left: 21px;
        background-position: 2px center;
        background-image: url(/content/images/checkbox-32.png);
    }
    .required
    {
        background-position:right center;
        background-image: url(/content/images/required.png);
    }
    #customer-cell-number-dialing-code, #passenger-cell-number-dialing-code, #customer-landline-dialing-code
    {
        width: 100px;
    }
    
    
    .close
    {
        position: absolute;
        margin-left: 820px;
        height: 27px;
        background-repeat: no-repeat;
        background-image: url(/content/img/dracula/close.png);
        background-color: red;
        padding: 0!important;
        width: 30px;
        border-radius: 50%;
        margin-top: 7px;
        cursor:pointer;
    }
    .close:hover
    {
        background-color: #CE0505;
    }
    .close:active
    {
        background-color: #790000;
    }
    .roshan
    {
        padding:5px 10px;
        background: #494945;
        color: white;
    }
</style>



                    <link href="/Scripts/zebra-tooltips/zebra_tooltips.css" rel="stylesheet" type="text/css" />
        <script src="/Scripts/zebra-tooltips/zebra_tooltips.js" type="text/javascript"></script>

        <link href="/Scripts/zebra-dialog/zebra_dialog.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/zebra-dialog/zebra_dialog.js" type="text/javascript"></script>


<div id="minutes" class="dropdown"></div>
        <div id="hours-list" class="dropdown"></div>
        <div id="postal-codes" class="dropdown"></div>
<div id="addresses-autocomplete" class="dropdown"></div>


<div class="hidden-fields spinner"></div>
<style>
    /* Spinner ----- the progress indicator
                    -----------------------------------------------------------*/
    .spinner
    {
        background-color: rgba(0, 0, 0, .8);
        background-image: url('/content/images/spinner.gif');
        background-repeat: no-repeat;
        background-position: 50%;
        position:absolute;
        z-index: 100;
    }
    .highlight { background:#DF8E8E!important; }
</style>


<div class="smart-panel edit-panel additional">
        <div class="close"></div>
        <script>
            $('.close').click(function () {
                $('.job-edit-panel').fadeOut();
            });
        </script>
        <h2 class="threeD-background">Edit your job...</h2>
        @*******************************************************@
        @**************** Pickup Locations ***************@
        @*******************************************************@
	
        <table id="required-info-table">
            <tr>
                <td>
                    <div class="from-location">
                            <div>
                                <label for="from-address" style="vertical-align: top;" class="required">From</label>
                                <textarea type="text" id="from-address" style="height: 80px;width: 150px;">@Model.PickFrom</textarea>
                            </div>
                    </div>
                </td>
			
                @*******************************************************@
                @**************** Drop-off Locations ***************@
                @*******************************************************@
			

                <td>
                    <div class="to-location">
                            <div>
                                <label for="to-address" style="vertical-align: top;" class="required">To</label>
                                <textarea type="text" id="to-address" style="height: 80px;width: 150px;">@Model.DropTo</textarea>
                            </div>
                    </div>
                </td>
            </tr>
        </table>

        <div class="additional-info-container">
            <div id="note-box" style="text-shadow: none;position: absolute;width: 258px;margin-left: 155px;padding: 11px;line-height: 1.5;color: #9B9797;@(Model.AdditionalInfo.IsEmpty() ? "" : "display:none;")">Let us know if you need any extra time for airport pickup or anything else you want to tell us! --- Enter your special requirements too!</div>
            <label for="additional-info">Special Requirement</label>
            <textarea id="additional-info">@Html.Raw(Model.AdditionalInfo)</textarea>
        </div>

        <script>
            $('#note-box').click(function () {
                $(this).hide();
                $('#additional-info').focus();
            });
            $('#additional-info').blur(function () {
                if (!$(this).val().length) $('#note-box').show();
            }).focus(function () {
                $('#note-box').hide();
            });
        </script>
	    @{var db = new CabDataContext();}
        <div class="select-container"></div>
        <script>
            

            function refreshNumberOf(token, callback)
            {
                $.post('/Client/GetNumberOf', {vehicleToken: token}, function(html) {
                    $('.select-container').html(html);
                    callback && callback();
                });
            }

            window.onload = function() {
                refreshNumberOf(@Model.VehicleToken, function() {
                    var vehicle = {
                        numberOfPassengers: @Model.NumberOfPassengers,
                        luggages: @Model.Luggage,
                        handLag: @Model.HandLag,
                        babySeats: @Model.BabySeats,
                        childSeats: @Model.ChildSeats
                    };

                    $('#number-of-passengers option').eq(vehicle.numberOfPassengers || 1).attr('selected', true);
                    $('#luggages option').eq(vehicle.luggages || 1).attr('selected', true);

                    $('#hand-lag option').eq(vehicle.handLag || 1).attr('selected', true);
                    $('#baby-seats option').eq(vehicle.babySeats || 1).attr('selected', true);
                    $('#child-seats option').eq(vehicle.childSeats || 1).attr('selected', true);
                });
            };
        </script>

        @{ string journeyType = Model.JourneyType; }

        
            <div class="return-time-container">
                <h2 style="margin-left: 16px;border:0;">Return & Wait</h2>
                <div>
                    <label for="journey-type">Journey type</label>
                    <select id="journey-type">
                        <option @(journeyType == "One Way" ? "selected" : "")>One Way</option>
                        <option @(journeyType == "Return" ? "selected" : "")>Return</option>
                    </select>
                </div>
                <div id="return-date-div" style="@(journeyType == "One Way" ? "display:none;" : "")">
                    <label for="return-date" class="required">Return Date</label>
                    <input type="text" id="return-date" value="@Model.ReturnTime.GetFormatedDate()">
                </div>
		
                <div id="return-time-div" style="@(journeyType == "One Way" ? "display:none;" : "")">
                    <label for="return-hours" class="required">Return Time</label>
                    <span>Hr:</span><input type="text" id="return-hours" class="hours-minutes" readonly value="@Model.ReturnTime.Hour">
                     <span>Min:</span><input type="text" id="return-minutes" class="hours-minutes" readonly value="@Model.ReturnTime.Minute">
                </div>

                <h2 style="margin-left: 16px;border:0;">Vehicle</h2>
                <div>
                    <label for="vehicle-type">Vehicle</label>
                    <select id="vehicle-type">
                        @foreach (var v in db.Vehicles)
                        {
                            <option id="@v.Token" @(vehicle.Token == v.Token ? "selected" : "")>@v.Name</option>
                        }
                    </select>
                </div>
            </div>
            <script>
                $('#journey-type').change(function () {
                    var value = $(this).val();
                    if (value == "Return") $('#return-date-div, #return-time-div').fadeIn();
                    else $('#return-date-div, #return-time-div').fadeOut();
                });

                $('#vehicle-type').change(function () {
                    refreshNumberOf($('#vehicle-type option')[$('#vehicle-type')[0].selectedIndex].id, function () {
                        $('.spinner').fadeOut();
                    });
                });
            </script>
        

        <div>
            <label for="pickup-date" class="required">Pickup Date</label>
            <input type="text" id="pickup-date" value="@Model.PickupTime.GetFormatedDate()">
        </div>

        <hr />
		
        <div>
            <label for="pickup-hours" class="required">Pickup Time</label>
            <span>Hr:</span><input type="text" id="pickup-hours" class="hours-minutes" readonly value="@Model.PickupTime.Hour">
            <span>Min:</span><input type="text" id="pickup-minutes" class="hours-minutes" readonly value="@Model.PickupTime.Minute">
        </div>

        <hr />

        <div>
            <label for="customer-name" class="required">Full Name</label>
            <input id="customer-name" type="text" value="@Model.Name">
        </div>

        <hr />

        <div>
            <label for="customer-cell-number" class="required">Mobile Number</label>
            <select id="customer-cell-number-dialing-code"></select>
            <input id="customer-cell-number" type="text" value="@Model.CellNumber" style="width: 100px;">
        </div>
	
        <hr />

        <div>
            <label for="landline-number">Land Line Number</label>
            <select id="customer-landline-dialing-code"></select>
            <input id="landline-number" type="text" value="" style="width: 100px;">
        </div>

        <hr />

        <div>
            <label for="customer-email" class="required">Email</label>
            <input id="customer-email" type="text" value="@Model.Email">
        </div>

        <hr />

        <div>
            <label for="stops">Diversions & Stops</label>
            <input type="checkbox" id="stops"@(Model.Stops.IsEmpty() ? "" : "checked")>
				
            <div id="enter-stops" style="padding-left: 0; display: none;@(Model.Stops.IsEmpty() ? "" : "display:block;")">
                <input type="hidden" id="hidden-stops" value="@(Model.Stops.IsEmpty() ? "" : Model.Stops)">
                <div id="prev-stops" style="padding: 0;">
                    @if (!Model.Stops.IsEmpty())
                    {
                        var stops = Model.Stops.Replace(",", "=====").Replace("-----", ",");
                        var splittedStops = stops.Split(',');

                        foreach (string t in splittedStops)
                        {
                            <div><span class="remove-stop">x</span>@t.Replace("=====", ",")</div>
                        }
                    }
                </div>

                <div class="add-new-stop">+</div>
                <div style="padding: 0;">
                    <select id="stops-type" style="vertical-align: top;">
                        <option>Post code</option>
                        <option>Airport</option>
                        <option>Address</option>
                        <option>Hotel</option>
                        <option>Train Station</option>
                        <option>Famous Place</option>
                    </select>
					
                    <input type="text" id="input-stops">
                    <textarea id="textarea-stops" style="display:none;width: 148px;height: 50px;vertical-align: bottom;"></textarea>
                    <select id="select-stops" style="display: none;" class="options-list"></select>
                </div>

            </div>
        </div>
        
        <hr />
        
         <div class="are-you-passenger">
            <label for="are-you-passenger">Are you the passenger?</label>
            <input type="hidden" id="are-you-passenger" value="@(Model.PassengerName.IsEmpty() ? "Yes" : "No")">

            <span id="yes-pessenger" class="@(Model.PassengerName.IsEmpty() ? "selected" : "")">Yes</span>
            <span id="no-passenger" class="@(Model.PassengerName.IsEmpty() ? "" : "selected")">No</span>
				
            <div id="i-am-passenger" style="padding-left: 0; display: none;@(Model.PassengerName.IsEmpty() ? "" : "display:block;")">
                
                <div>
                    <label for="passenger-name" class="required">Passenger Name</label>
                    <input id="passenger-name" type="text" value="@Html.Raw(Model.PassengerName)">
                </div>

                <hr />

                <div>
                    <label for="passenger-cell-number" class="required">Contact Number</label>
                    <select id="passenger-cell-number-dialing-code"></select>
                    <input id="passenger-cell-number" type="text" style="width:100px;" value="@Html.Raw(Model.PassengerCell)">
                </div>

            </div>
        </div>

        <h2 id="distance-preview"></h2>
        <h2>You'll be informed via Email about fare!</h2>
    </div>
	
    <script>
        $('.add-new-stop').click(function () {
            var input = $('#input-stops');
            if ($(input).css('display') == 'none') {
                if ($('#select-stops').css('display') != 'none')
                    input = $('#select-stops');
                else
                    input = $('#textarea-stops');
            }

            if (!$(input).val().length) {
                highlight($(input).focus());
                return;
            }

            var prevStops = $('#prev-stops')[0];

            var value = $(input).val();

            prevStops.innerHTML += '<div><span class="remove-stop">x</span>' + value + '</div>';

            var hiddenStops = document.getElementById('hidden-stops');

            if (hiddenStops.value.length) hiddenStops.value += '-----' + value;
            else hiddenStops.value = value;

            removeStopsButtonsClicksHandling();

            $(input).val('').focus();
        });

        function removeStopsButtonsClicksHandling() {
            $('.remove-stop').click(function () {
                var stops = $('#hidden-stops').val(),
                    remove = $(this).parent().text();

                remove = remove.substr(1, remove.length - 1);

                stops = stops.replace('-----' + remove, '').replace(remove, '').replace('----------', '-----');
                if (stops.indexOf('-----') == 0) stops = stops.substr(5, stops.length - 1);

                $('#hidden-stops').val(stops);

                this.parentNode.parentNode.removeChild(this.parentNode);
            });
        }
        removeStopsButtonsClicksHandling();
    </script>

    <div class="finalize-booking smart-panel">
        <h2 style="text-shadow: none;font-size: 20px;">Save Changes</h2>
        <p style="margin: 10px; font-size: 13px;padding: 0;line-height: 1;">Now, click to update your job!</p>
    </div>
    
<script>
    $('.methods div').click(function () {
        $('.methods div.selected').removeClass('selected');
        $(this).addClass('selected');
    });

    // booking the job --- here!
    function bookTheJob() {
        var pickFrom = '';
        pickFrom = $('#from-address').val();
        
        var dropTo = '';
        dropTo = $('#to-address').val();

        var returnTime = '';
        if ($('#journey-type').val() === 'Return') {
            returnTime = $('#return-date').val() + ' ' + $('#return-hours').val() + ':' + $('#return-minutes').val();
        }

        var passengerName = '', passengerCell = '';
        if ($('#are-you-passenger').val() == 'No') {
            passengerName = $('#passenger-name').val();
            passengerCell = $('#passenger-cell-number-dialing-code').val().split(' (')[0] + ' ' + $('#passenger-cell-number').val();
        }

        var landlineNumber = '';
        if ($('#landline-number').val().length) {
            landlineNumber = $('#customer-landline-dialing-code').val().split(' (')[0] + ' ' + $('#landline-number').val();
        }

        loadSpinner('.job-edit-panel');
        $.post('/Client/EditJob', {
            jobToken: '@Model.Token',
            customerName: $('#customer-name').val(),
            cellNumber: $('#customer-cell-number-dialing-code').val().split(' (')[0] + ' ' + $('#customer-cell-number').val(),
            landLine: landlineNumber,
            email: $('#customer-email').val(),
            pickFrom: pickFrom,
            dropTo: dropTo,
            pickupTime: $('#pickup-date').val() + ' ' + $('#pickup-hours').val() + ':' + $('#pickup-minutes').val(),
            returnTime: returnTime,
            numberOfPassengers: $('#number-of-passengers').val(),
            vehicleType: $('#vehicle-type option')[$('#vehicle-type')[0].selectedIndex].id,
            childSeats: $('#child-seats').val(),
            babySeats: $('#baby-seats').val(),
            luggage: $('#luggages').val(),
            handLag: $('#hand-lag').val(),
            payAs: 'Cash',
            additionalInfo: validate($('#additional-info').val()),
            journeyType: $('#journey-type').val(),
            stops: $('#hidden-stops').val(),
            passengerName: passengerName,
            passengerCell: passengerCell
        },
            function (response) {
                $('.spinner').fadeOut();

                if (response == false) {
                    alert('Something went wrong while saving your changes.\n\nAre you missed something?');
                    return;
                }

                location = '/Client/';
            });
    }

    var inputStops = '';
    $('.finalize-booking').click(function () {
        bookButtonClick();
    });

    function bookButtonClick(onlyValidateFields) {

        var ids = 'from-address, to-address, pickup-date, pickup-hours, pickup-minutes, customer-name, customer-cell-number, customer-email';

        if ($('#journey-type').val() === 'Return') {
            ids += ', return-date, return-hours, return-minutes';
        }

        var elem = getEmptyElement(ids);
        if (elem !== true) return;

        if ($('#stops').attr('checked')) {
            if (!$('#hidden-stops').val().length) {
                $('.spinner').hide();
                highlight($('#stops').parent().focus());
                alert('You must enter at least one diversion/stop.\n\nOtherwise, please uncheck "Diversions & Stops" option.');
                return;
            }
        }
        else {
            $('#hidden-stops').val('');
            $('#prev-stops').html('');
        }

        if (!$('#are-you-passenger').val().length) {
            highlight($('.are-you-passenger'));
            return;
        }

        if ($('#are-you-passenger').val() == 'No') {
            elem = getEmptyElement('passenger-name, passenger-cell-number');
            if (elem !== true) return;
        }

        // Now valdiating Drop Down Options
        if (isBadSelection('#number-of-passengers')) return;
        if (isBadSelection('#luggages')) return;
        if (isBadSelection('#hand-lag')) return;

        var inputElement = $('#customer-cell-number');
        if (!isValidPhoneNumber(inputElement)) return;

        inputElement = $('#landline-number');
        if ($(inputElement).val().length && !isValidPhoneNumber(inputElement)) return;

        inputElement = $('#passenger-cell-number');
        if ($('#are-you-passenger').val() == 'No' && !isValidPhoneNumber(inputElement)) return;

        if (onlyValidateFields) return;

        bookTheJob();
    }

    var phoneRegex = /^[0-9 ]{1,15}$/;
    function isValidPhoneNumber(element) {
        var value = $(element).val();
        if (!phoneRegex.test(value)) {
            alert('You must enter a valid phone number!\nMust be less than 15 digits.\nMust be numbers.\n\nYou can use spaces too!');
            highlight($(element));
            return false;
        }
        return true;
    }

    function isBadSelection(element) {
        if ($(element).val() == '---') {
            highlight($(element).focus());
            alert('Please select ' + $(element).attr('id').replace(/-/g, ' ') + '!');
            return true;
        }
        return false;
    }

    $('#stops').change(function () {
        var checked = $(this).attr('checked');
        if (checked)
            $('#enter-stops').fadeIn();
        else
            $('#enter-stops').fadeOut();
    });

    $('#stops-type').change(function () {
        var option = $(this).val(), element = $(this).parent();

        if (option === 'Post code') {
            postalCodesHandling(element);
            postalCodesDropDown($(element).find('#input-stops')[0]);
        }
        option === 'Airport' && airportsHandling(element);
        option === 'Address' && addressesHandling(element);
        option === 'Hotel' && hotelsHandling(element);
        option === 'Train Station' && trainStationsHandling(element);
        option === 'Famous Place' && famousPlacesHandling(element);
    });

    $('#input-stops').keyup(function () {
        var selected = $(this).parent().find('select')[0].value;
        if (selected === 'Post code') postalCodesDropDown(this);
    });
</script>

<script>
    (function () {

        function showDropDown(target, dropDown) {
            target = $('#' + target)[0];
            dropDown = $('#' + dropDown)[0];

            var top = $(target).offset().top + target.clientHeight,
                left = $(target).offset().left + 1;

            $(dropDown).css('top', top).css('left', left).css('width', target.clientWidth).slideDown();
        }

        function pickUpDate() {
            $('#pickup-date, #return-date').focus(function () {
                $(this).Zebra_DatePicker();
            });
        }

        function pickupTime() {
            $('#pickup-hours, #return-hours').focus(function () {
                hoursTarget = this;
                showDropDown(this.id, 'hours-list');
            });

            var hours = $('#hours-list')[0],
                val, i, target;
            for (i = 1; i <= 23; i++) {
                val = (i <= 9 ? '0' + i : i);
                hours.innerHTML += '<div accesskey="' + val + '">' + val + '</div>';
            }

            $('#pickup-minutes, #return-minutes')
                .focus(function () {
                    minutesTarget = this;
                    showDropDown(this.id, 'minutes');
                });
            var minutes = $('#minutes')[0];
            for (i = 0; i <= 60; i += 5) {
                if (i == 60) i = 59;

                val = (i <= 9 ? '0' + i : i);
                minutes.innerHTML += '<div accesskey="' + val + '">' + val + '</div>';

                if (i == 59) i = 61;
            }

            var hoursTarget, minutesTarget;
            $('#hours-list div').click(function () {
                $('#hours-list').hide();
                hoursTarget.value = $(this).attr('accesskey');
            });

            $('#minutes div').click(function () {
                $('#minutes').hide();
                minutesTarget.value = $(this).attr('accesskey');
            });
        }

        call(pickUpDate, pickupTime);
    })();
</script>

<script>
    $('.are-you-passenger span').click(function () {
        $('.are-you-passenger span').removeClass('selected');
        $(this).addClass('selected');

        var value = $(this).html();
        $('#are-you-passenger').val(value);

        if (value == 'No') {
            $('#i-am-passenger').fadeIn();
            $('#passenger-name').focus();
        }
        else $('#i-am-passenger').fadeOut();
    });

    var dialingCodes, index;
    $.post('/Defaults/GetDialingCodes', function (html) {
        dialingCodes = html.split('\n');
        $('#customer-cell-number-dialing-code, #passenger-cell-number-dialing-code, #customer-landline-dialing-code').html(html);

        var customerCellNumber = $('#customer-cell-number'),
            passengerCellNumber = $('#passenger-cell-number'),
            customerLandlineNumber = $('#landline-number');

        getIndex(customerCellNumber);
        $('#customer-cell-number-dialing-code option').eq(index - 1).attr('selected', true);

        getIndex(passengerCellNumber);
        $('#passenger-cell-number-dialing-code option').eq(index - 1).attr('selected', true);

        getIndex(customerLandlineNumber);
        $('#customer-landline-dialing-code option').eq(index - 1).attr('selected', true);
    });

    function getIndex(input) {
        var term = $(input).val().split(' ')[0];
        if (!term) { index = 129; return; }

        $(input).val($(input).val().replace(term, '').trim());

        $.grep(dialingCodes, function (n, i) {
            ($(n).html() + '').split(' ')[0] == term + '' && (index = i);
        });
    }
</script>



    <link href="@Url.Content("~/Scripts/datepicker/datepicker.css")" rel="stylesheet"> 
    <script src="http://maps.google.com/maps/api/js?sensor=false&libraries=places"> </script>

    
    <link href="@Url.Content("~/Scripts/geo-autocomplete/auto-complete.css")" rel="stylesheet"> 
    <script src="@Url.Content("~/Scripts/geo-autocomplete/auto-complete.js")" type="text/javascript"></script>

<script src="@Url.Content("~/Scripts/datepicker/datepicker.js")" type="text/javascript"></script> 
        
      <script src="@Url.Content("~/Scripts/client-page.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/make-a-booking.js")" type="text/javascript"></script>